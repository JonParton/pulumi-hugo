 {{ with $.Params.api_url }}
    {{ $openapi := getJSON $.Params.api_url }}
        <div style="display: flex; flex-direction: column; align-items: stretch;">
            {{ range $path, $pathMethods := $openapi.paths }}
                {{ range $pathMethod, $pathDetails := $pathMethods }}
                    <div>
                        <h3>{{ $pathDetails.summary }}</h3>
                        <p>{{ $pathDetails.description | markdownify }}</p>
                        <pre><code>{{ upper $pathMethod }} {{ $path }}</code></pre>
                        {{ if $pathDetails.parameters }}
                            <h5>Parameters</h5>
                            <table>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>In</th>
                                    <th>Description</th>
                                </tr>
                                {{ range $param := $pathDetails.parameters }}
                                    {{ if isset $param "$ref"}}
                                        {{ $refPath := index $param "$ref" }}
                                        {{ range $index, $component := (split $refPath "/") }}
                                            {{ if (index $openapi.components.parameters $component) }}
                                                <tr>
                                                    <td><code>{{(index $openapi.components.parameters $component).name}}</code></td>
                                                    <td>{{(index $openapi.components.parameters $component).type}}</td>
                                                    <td>{{(index $openapi.components.parameters $component).in}}</td>
                                                    <td>{{(index $openapi.components.parameters $component).description | markdownify}}</td>
                                                </tr>
                                            {{ end }}
                                        {{ end }}
                                    {{ else }}
                                        <tr>
                                            <td><code>{{ $param.name }}</code></td>
                                            <td>{{ $param.schema.type }}</td>
                                            <td>{{ $param.in }}</td>
                                            <td>{{ $param.description | markdownify }}</td>
                                        </tr>
                                    {{ end }}
                                {{ end }}
                            </table>
                        {{ end }}
                        {{ range $responseCode, $responseDetails := $pathDetails.responses }}
                            </br>
                            {{ if isset $responseDetails "content" }}
                                {{ range $exampleName, $example := (index $responseDetails.content "application/json").examples }}
                                    {{ if isset $example "$ref" }}
                                        {{ $refPath := index $example "$ref" }}
                                        {{ range $index, $component := (split $refPath "/") }}
                                            {{ if (index $openapi.components.examples $component) }}
                                                <h5>Example for Response Code: {{ $responseCode }}</h5>
                                                <pre><code>{{(index $openapi.components.examples $component).value | jsonify (dict "indent" "  ") }}</code></pre>
                                            {{ end }}
                                        {{ end }}
                                    {{ else }}
                                        <pre><code style="flex-wrap: nowrap; overflow-x: scroll;">{{ $example | jsonify (dict "indent" "  ") }}</code></pre>
                                    {{ end }}
                                {{ end }}
                            {{ end }}
                        {{ end }}
                    </div>
                {{ end }}
            {{ end }}
        </div>
    {{ end }}